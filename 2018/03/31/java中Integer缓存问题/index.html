<!DOCTYPE html>
<html lang="en">
	<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <title>Demiurge</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
	<body>
		<div class='container'>
			<header class="header">
  <div class="blog-title">
    <a href="/" class="logo">Demiurge</a>
  </div>
  <nav class="navbar">
    <ul class="menu">
      
        <li class="menu-item">
          <a href="/" class="menu-item-link">Home首页</a>
        </li>
      
        <li class="menu-item">
          <a href="/archives" class="menu-item-link">Archives归档</a>
        </li>
      
        <li class="menu-item">
          <a href="https://github.com" class="menu-item-link">Github交友</a>
        </li>
      
    </ul>
  </nav>
</header>
			<main class="main">
				<article class="post">
  <div class="post-title">
    <h2 class="title"></h2>
  </div>
   <div class="post-meta">
    <span class="post-time">2018-03-31</span>
  </div>
  <div class="post-content">
    <p>先来看一道题</p>
<pre>
    // 程序填空,交换a和b的值,
    public static void main(String[] args) {
        int a = 10;
        int b = 20;
        swap(a, b);
        System.out.println((Integer) a);//20
        System.out.println((Integer) b);//10
    }

    private static void swap(int a, int b) {
        // TODO
    }
</pre>  

<p>我们都知道参数类型为int时,实际上传入的值,而不是地址.所以在swap方法中直接去交换a和b的值是行不通的.那究竟用什么方法呢?<br>答案是:反射</p>
<pre>
    private static void swap(int a, int b) {
        try {
            // 获取Integer的内部类IntegerCache字节码对象.
            Class<?> clazz = Class.forName("java.lang.Integer$IntegerCache");
            // 获取IntegerCache名为cache的字段.
            Field field = clazz.getDeclaredField("cache");
            // 设置该字段的访问权限
            field.setAccessible(true);
            // 获取field在IntegerCache实际的值
            Integer[] cache = (Integer[]) field.get(clazz);
            // 修改第129个位置的值(原本为1)为2
            cache[129] = new Integer(2);// 此处必须使用new Integer(i)的方式来修改.
            // 修改第130个位置的值(原本为2)为1
            cache[130] = new Integer(1);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
</pre>
在[-128,127]范围内的值我们可以通过上面的方法直接去修改IntegerCache的值.但最后打印的时候必须要强转成Integer类型,否则打印出来是原始值.
超过上述范围时,我们可以通过下面代码来修改
<pre>

</pre>
  </div>
</article>
			</main>
		</div
	</body>
</html>